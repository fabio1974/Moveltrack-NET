<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
							<link href="css/bootstrap.css" rel="stylesheet" />
							<script src="js/loader.js"></script>
							<script src="js/jquery-2.1.1.js"></script>
							<script src="js/date.format.js" type="text/javascript"></script>

							<script type="text/javascript">
							
								
								
								var inicio = '#{genericReportBean.inicio.time}';
								var fim = '#{genericReportBean.fim.time}';
								var tipo = '#{param['tipo']}'
								var titulo = '';
								var pontosCaminho= new Array();
								
								switch (tipo) {
								case 'produtividadeVeiculo':
									titulo = 'Veículos que mais fizeram maior número de viagens no período.'
									break;
									
								case 'consumoVeiculo':
									titulo = 'Veículos com o melhor desempenho de consumo de combustível (km/litro).'
									break;	

								default:
									break;
								}
	
								
							    google.charts.load('current', {'packages':['corechart']});
							    google.charts.setOnLoadCallback(drawChart);
	
							    function drawChart() {
							    	
							    	var data = new google.visualization.DataTable();
								    data.addColumn('string', 'Item');
								    data.addColumn('number', 'Quantidade');
							    	
							        var options = {
									          title: titulo,
									          is3D : true
									        };

							    	$.getJSON("#{request.contextPath}/Chart?tipo="+tipo+"&amp;inicio="+inicio+"&amp;fim="+fim,function(list){
								    	pontosCaminho = new Array();
								    	var list;
								    	if(list.length>0){
									        $.each(list,function(i,item){
									        	//var info = (loc.velocidade).toFixed(1)+"km/h em " + dateFormat(loc.dateLocation,"dd/mm/yyyy HH:MM");
									        	data.addRow([item.name,parseFloat(item.value)]);
									        });
									        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
									      	chart.draw(data, options);
								    	}	
								    });
							    	
							      
							      }
							    
							    function myFunction() {
								    window.print();
								}
						  </script>			

				<div class="row">
					<div class="col-lg-12">
							<button class="btn btn-primary btn-xs" style="margin:5px; "  onclick="myFunction()">Imprimir</button>
							<div id="piechart" style="width: 100%; height: 1000px;" />
					</div>
				</div>
</h:body>
</html>