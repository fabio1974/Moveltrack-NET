<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>

	<ui:composition template="template/adminTemplate.xhtml">
		<ui:define name="content">
		

			

			<div class="wrapper wrapper-content">
				<div class="row">
					<div class="col-lg-12">
						<div class="ibox">
							<b><div class="inbox title">Rastreadores</div></b>
							<div class="ibox-content">
								<h:form onsubmit="document.body.style.cursor='wait'" id="form" role="form">
									<div class="row ">

										<div class="col-sm-12">
											<div class="pull-right">
												<div class="form-inline">
													<div class="input-group input-group-xs">


														<h:selectOneMenu styleClass="  form-control-xs inline"
															value="#{equipamentoTable.rowsPerPage}"
															converter="#{selectIntegerConverter}">
															<f:selectItem itemValue="5"  itemLabel="05 linhas" />
															<f:selectItem itemValue="10" itemLabel="10 linhas" />
															<f:selectItem itemValue="15" itemLabel="15 linhas" />
															<f:selectItem itemValue="20" itemLabel="20 linhas" />
															<f:selectItem itemValue="30" itemLabel="30 linhas" />
														</h:selectOneMenu>


														<span class="input-group-btn"> <h:commandButton
																value="Ok" action="#{equipamentoTable.pageFirst}"
																styleClass="btn btn-primary  " />
														</span>

													</div>
												</div>
											</div>
										</div>
									</div>
									
									<p></p>

									<div class="row">
										<div class="col-lg-12">
											<div class="table-responsive ">
													<h:dataTable value="#{equipamentoTable.equipamentos}"  id="table"
														class="table table-striped table-bordered table-hover"
														var="equipamento">
														
			
														<h:column footerClass="customFooter">
															<f:facet name="header">
																<h:commandLink value="Imei"
																	actionListener="#{equipamentoTable.sort}">
																	<f:attribute name="sortField" value="imei" />
																</h:commandLink>
															</f:facet>
															
															<f:facet name="header">
																	<h:inputText  value="#{equipamentoTable.imei}"  styleClass="input-xs form-control"  />
															</f:facet>
															<center>
															<h:outputText value="#{equipamento.imei}" />
															</center>
															<f:facet  name="footer">
																<h:outputText  value="#{equipamentoTable.imei}"/>
															</f:facet>													
														</h:column>

													<h:column footerClass="customFooter">
														<f:facet name="header">
															<h:commandLink value="Chip - ICCID"
																actionListener="#{equipamentoTable.sort}">
																<f:attribute name="sortField" value="chip.iccid" />
															</h:commandLink>
														</f:facet>

														<f:facet name="header">
															<h:inputText name="chip" id="chip"
																value="#{equipamentoTable.chip}"
																class="input-xs form-control "
																converter="#{chipConverter}" />
														</f:facet>
														<center>
															<h:commandLink action="chipTable"
																value="#{equipamento.chip.iccid}">
																<f:setPropertyActionListener
																	value="#{equipamento.chip.iccid}"
																	target="#{chipTable.iccid}" />
																<f:setPropertyActionListener value="chip"
																	target="#{navigator.topico}" />
																<f:actionListener binding="#{chipTable.refreshPage()}" />
															</h:commandLink>
														</center>
														<f:facet name="footer">
															<h:outputText value="#{equipamentoTable.chip.iccid}" />
														</f:facet>
													</h:column>
													
													
													<h:column footerClass="customFooter">
														<f:facet name="header">
														<center>
															<h:commandLink value="Chip - Número"
																actionListener="#{equipamentoTable.sort}">
																<f:attribute name="sortField" value="chip.numero" />
															</h:commandLink>
														</center>	
														</f:facet>

														<center>
															<h:outputText value="#{equipamento.chip.numero}" />
														</center>
													</h:column>
													


													<h:column footerClass="customFooter">
															<f:facet name="header">
																<h:commandLink value="Senha"
																	actionListener="#{equipamentoTable.sort}">
																	<f:attribute name="sortField" value="senha" />
																</h:commandLink>
															</f:facet>
															<f:facet name="header">
																	<h:inputText  value="#{equipamentoTable.senha}"  styleClass="input-xs form-control"  />
															</f:facet>
																<center>																											
																	<h:outputText value="#{equipamento.senha}" />
																</center>
															<f:facet  name="footer">
																<h:outputText  value="#{equipamentoTable.senha}"/>
															</f:facet>	
														</h:column>
														
														
														
														
														
													<h:column footerClass="customFooter">
														<f:facet name="header">
															<h:commandLink value="Possuidor"
																actionListener="#{equipamentoTable.sort}">
																<f:attribute name="sortField" value="possuidor.nome" />
															</h:commandLink>
														</f:facet>
														<f:facet name="header">
														
																<h:inputText name="possuidor" id="possuidor" 
																	value="#{equipamentoTable.possuidor}"
																	class="input-xs form-control "
																	converter="#{empregadoConverter}" />

														</f:facet>
														<h:outputText style="font-size: 10px;" value="#{equipamento.possuidor.nome}" />
														<f:facet name="footer">
															<h:outputText value="#{equipamentoTable.possuidor}" />
														</f:facet>
													</h:column>
													
													
													<h:column footerClass="customFooter">
														<f:facet name="header"><center>Veículo</center></f:facet>
														
														<h:outputText style="font-size: 10px;" 
														value="#{equipamentoTable.getVeiculo(equipamento)}" />
													</h:column>
													
													
													<h:column rendered="#{!loginBean.hasPermission('VEICULO_VER_PROPRIO')}" footerClass="customFooter">
														<f:facet name="header">
														<center>
															<h:commandLink value="Modelo"
																actionListener="#{equipamentoTable.sort}">
																<f:attribute name="sortField" value="modelo" />
															</h:commandLink>
														</center>	
														</f:facet>
														<f:facet name="header">

															<h:selectOneMenu id="modelo" 
																value="#{equipamentoTable.modelo}"
																styleClass="form-control input-xs">
																<f:selectItem  itemLabel="&nbsp;" noSelectionOption="yes" />
																<f:selectItems value="#{equipamentoForm.modelos}" />
															</h:selectOneMenu>

														</f:facet>
														<center>
														<h:outputText value="#{equipamento.modelo}" />
														</center>
														<f:facet name="footer">
															<h:outputText  value="#{equipamentoTable.modelo}" />
														</f:facet>
													</h:column>
													
													
													<h:column rendered="#{!loginBean.hasPermission('VEICULO_VER_PROPRIO')}" footerClass="customFooter">
														<f:facet name="header">
														<center>
															<h:commandLink value="Status"
																actionListener="#{equipamentoTable.sort}">
																<f:attribute name="sortField" value="situacao" />
															</h:commandLink>
														</center>	
														</f:facet>
														<f:facet name="header">

															<h:selectOneMenu id="situacao" 
																value="#{equipamentoTable.situacao}"
																styleClass="form-control input-xs">
																<f:selectItem  itemLabel="&nbsp;" noSelectionOption="yes" />
																<f:selectItems value="#{equipamentoForm.situacoes}" />
															</h:selectOneMenu>

														</f:facet>
														<center>
														<h:outputText value="#{equipamento.situacao}" />
														</center>
														<f:facet name="footer">
															<h:outputText  value="#{equipamentoTable.situacao}" />
														</f:facet>
													</h:column>
													
													
														<h:column footerClass="customFooter">
														
															<f:facet name="header">
															<center>
																<h:commandLink value="Correção GMT"
																	actionListener="#{equipamentoTable.sort}">
																	<f:attribute name="sortField" value="atrasoGmt" />
																</h:commandLink>
																</center>
															</f:facet>
															
															
															
	                                                    <center>
														<h:outputText action="chipTable"  value="#{equipamento.atrasoGmt}" />
														</center>
														
														</h:column>
		
														
														<h:column footerClass="customFooter">
															<f:facet name="header">
															<center>
																<h:commandButton styleClass="btn btn-primary btn-xs" value="Filtrar" 
																		actionListener="#{equipamentoTable.refreshPage}">
																</h:commandButton>
															</center>	
															</f:facet>
															<center>
																<h:panelGrid   columns="3">
																		<h:commandLink 
																			styleClass="btn btn-primary btn-xs "
																			title="Visualizar" 
																			action="equipamentoForm">
																			<i class="fa fa-search "></i>
																			<f:setPropertyActionListener value="#{equipamento}"  target="#{equipamentoForm.equipamento}"/>
																			<f:setPropertyActionListener value="SHOW"  target="#{equipamentoForm.action}"/>
																		</h:commandLink>
																		&nbsp;
																		<h:commandLink 
																			styleClass="btn btn-warning btn-xs " 
																			title="Atualizar"
																			action="equipamentoForm">
																			<i class="fa fa-wrench "></i>
																			<f:setPropertyActionListener value="#{equipamento}"  target="#{equipamentoForm.equipamento}"/>
																			<f:setPropertyActionListener value="UPDATE"  target="#{equipamentoForm.action}"/>
																		</h:commandLink>	
																</h:panelGrid>
															</center>
														</h:column>
														
														
														
														
														
														
														
														
														
														
														
														
														
														
														
														
														
														
														
													</h:dataTable>
									</div>
										</div>
								   </div>
								<div class="row">
										<div class="col-lg-5  col-md-5">
													<h:commandButton id="button"
														styleClass="btn btn-primary btn-xs " value="Adicionar Novo Rastreador"
														action="equipamentoForm" >
														<f:setPropertyActionListener value="INSERT"  target="#{equipamentoForm.action}"/>
													</h:commandButton>	
										</div>
										<div class="col-lg-2 col-md-2">
												<div class="input-group input-group-xs">
													<span class="input-group-btn">
													<h:commandButton
															id="pag" styleClass="btn btn-primary " value="Ir para Página"
															action="#{equipamentoTable.loadCurrentPage}" /> 
													</span>	
													<h:inputText id="currentPage"
														styleClass="form-control" style="width: 40px"
														value="#{equipamentoTable.currentPage}"
														onkeypress="if (event.keyCode == 13) { onchange(); return false; }">
														<f:ajax event="change" 	listener="#{equipamentoTable.loadCurrentPage}" />
													</h:inputText>
												</div>	
										</div>			
										<div class="col-lg-2  col-md-2">
												<div class="input-group input-group-xs">
													<span class="input-group-btn"> 
														<h:commandLink
															action="#{equipamentoTable.pageFirst}"
															styleClass="btn btn-white" style="width: 40px"
															disabled="#{equipamentoTable.currentPage == 1}">
															<i class="glyphicon glyphicon-fast-backward"></i>
														</h:commandLink> 
														<h:commandLink action="#{equipamentoTable.pagePrevious}"
															styleClass="btn btn-white" style="width: 40px"
															disabled="#{equipamentoTable.currentPage == 1}">
															<i class="glyphicon glyphicon-step-backward"></i>
														</h:commandLink>
														<h:commandLink
															action="#{equipamentoTable.pageNext}" styleClass="btn btn-white"
															style="width: 40px"
															disabled="#{equipamentoTable.currentPage >= equipamentoTable.lastPage}">
															<i class="glyphicon glyphicon-step-forward"></i>
														</h:commandLink> 
														<h:commandLink action="#{equipamentoTable.pageLast}"
															styleClass="btn btn-white" style="width: 40px"
															disabled="#{equipamentoTable.currentPage >= equipamentoTable.lastPage}">
															<i class="glyphicon glyphicon-fast-forward"></i>
														</h:commandLink>
													</span>	
												</div>
										</div>
										<div class="col-lg-3 col-md-3">
										<div class="pull-right">
												<b>
													<h:outputText value="Pág.#{equipamentoTable.totalPages>0?equipamentoTable.currentPage:0}/#{equipamentoTable.totalPages}" />
													&nbsp;&nbsp;&nbsp;&nbsp;Registros:	<h:outputText value="#{equipamentoTable.totalRows}" />
												</b>
										</div>		
										</div>
									</div>
							</h:form>
						</div>
					</div>
				</div>
			</div>
			</div>
			
		</ui:define>
	</ui:composition>

</h:body>

</html>






